
Создайте Docker Compose файл с тремя сервисами. Первый сервис – это веб-приложение на Python (например, Flask), с IP-адресом 172.18.0.3, которое слушает порт 5000 в контейнере и прокидывает его на порт 5001 хостовой машины. Второй сервис – это база данных MySQL с IP-адресом 172.18.0.4, которая слушает порт 3306 как внутри контейнера, так и на хосте. Третий сервис – это nginx, который проксирует запросы с порта 8080 хоста на первый сервис.

Смонтируйте директории с хостовой машины для каждого сервиса: для веб-приложения используйте директорию ./flask_app/ на хосте, которая будет монтироваться в /app/ в контейнере. Для базы данных используйте директорию ./mysql_data/, которая будет монтироваться в /var/lib/mysql/. Для nginx используйте директорию ./nginx_conf/, которая будет монтироваться в /etc/nginx/conf.d/. Убедитесь, что веб-приложение зависит от базы данных, а nginx – от веб-приложения.

